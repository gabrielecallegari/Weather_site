"use strict";var main,weatherForm=document.getElementById("weatherForm"),reset_button=document.getElementById("reset-button"),input=document.querySelector(".header-section input"),cities=document.querySelector(".ajax-section .cities"),message=document.getElementById("error-box__msg"),apiKey="4d8fb5b93d4af21d66a2948710284366",divErrorBox=document.getElementById("error-box"),app=document.getElementById("app"),contatore_city=0,viserr=!1,fareh=!1,arrayCitta=[];function myFunction(){var t=document.getElementById("myLinks");"block"===t.style.display?(t.style.display="none",1==viserr?(app.style.display="none",divErrorBox.style.display="block"):(app.style.display="block",divErrorBox.style.display="none"),reset_button.style.display=0==contatore_city||1==viserr?"none":"block"):(t.style.display="block",app.style.display="none",divErrorBox.style.display="none",reset_button.style.display="none")}function functionResetButton(){contatore_city=0,cities.innerHTML="",reset_button.style.display="none",arrayCitta=[]}function okFunction(){setTimeout(function(){divErrorBox.style.display="none",app.style.display="block",reset_button.style.display=0==contatore_city?"none":"block"},150),viserr=!1}function far(){0==fareh?(fareh=!0,bottoneFar.style.backgroundColor="green",bottoneFar.innerHTML="On"):(fareh=!1,bottoneFar.style.backgroundColor="red",bottoneFar.innerHTML="Off")}weatherForm.addEventListener("submit",function(t){t.preventDefault();var t=cities.querySelectorAll(".ajax-section .city"),t=Array.from(t),e=input.value;if(0<t.length&&(arrayCitta.push(e),0<t.filter(function(t){return(e.includes(",")?2<e.split(",")[1].length?(e=e.split(",")[0],t.querySelector(".city__name span").textContent.toLowerCase()):t.querySelector(".city__name").dataset.name.toLowerCase():t.querySelector(".city__name span").textContent.toLowerCase())==e.toLowerCase()}).length))return app.style.display="none",reset_button.style.display="none",viserr=!0,divErrorBox.style.display="block",message.innerHTML="Hai già cercato questa città!",weatherForm.reset(),void input.focus();t="https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&lang=it&appid=").concat(apiKey,"&units=metric");fetch(t).then(function(t){return t.json()}).then(function(t){var e,n,a=t.main,s=t.name,i=t.sys,o=t.weather,t=t.id;arrayCitta.includes(t)?(app.style.display="none",reset_button.style.display="none",viserr=!0,divErrorBox.style.display="block",message.innerHTML="Hai già cercato questa città!"):(arrayCitta.push(t),contatore_city++,e=o[0].icon,e="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/".concat(e,".svg"),o=o[0].description,(n=document.createElement("li")).classList.add("city"),n.dataset.identity=t,t="https://countryflagsapi.com/png/"+i.country.toLowerCase()+"/",s=(0==fareh?'\n                    <h2 class="city__name">\n                        <span>'.concat(s,'</span>\n                        <img src="').concat(t,'" class="city__emoji" alt="').concat(i.country,'">\n                    </h2>\n                    <div class="city__temp">\n                        <span><tmp id="tmpfissa">').concat(Math.round(a.temp),'</tmp><sup> °</sup><sigla id="sigla">C</sigla></span><br>\n                        \n                        <span>Percepita: <tmp id="tmprc">').concat(Math.round(a.feels_like),'</tmp><sup> °</sup><sigla id="sigla">C</sigla></span>\n                        \n                    </div>\n                    <figure>\n                        <img class="icon" src="'):'\n                    <h2 class="city__name">\n                        <span>'.concat(s,'</span>\n                        <img src="').concat(t,'" class="city__emoji" alt="').concat(i.country,'">\n                    </h2>\n                    <div class="city__temp">\n                        <span><tmp id="tmpfissa">').concat(Math.round(9*Math.round(a.temp)/5+32),'</tmp><sup> °</sup><sigla id="sigla">F</sigla></span><br>\n                        \n                        <span>Percepita: <tmp id="tmprc">').concat(Math.round(9*Math.round(a.feels_like)/5+32),'</tmp><sup> °</sup><sigla id="sigla">F</sigla></span>\n                        \n                    </div>\n                    <figure>\n                        <img class="icon" src="')).concat(e,'" alt="').concat(o,'">\n                        <figcaption>').concat(o,"</figcaption>\n                    </figure>\n                "),n.innerHTML=s,cities.prepend(n),reset_button.style.display=0==contatore_city?"none":"block")}).catch(function(){viserr=!0,contatore_city--,app.style.display="none",reset_button.style.display="none",divErrorBox.style.display="block",message.innerHTML="La città inserita non risulta esistente",input.classList.add("error")}),input.classList.remove("error"),weatherForm.reset()}),reset_button.style.display=0==contatore_city?"none":"block",divErrorBox.style.display=0==viserr?"none":"block";